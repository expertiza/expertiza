<div ng-controller='UsersPageCtrl'> <!-- make this page available to angular controller -->

<h1>Manage users</h1>

<br/>
<%= form_tag :action => 'show_selection' do %>
  View user - enter exact login: <%= text_field_with_auto_complete :user, :name, {:size => 41} %>
<input type='submit' value='Edit'/>
<% end %>

<%= form_tag :action => 'list', :paginate_show => '1', :num_users => @per_page do %>
  <%= label_tag :letter, 'Search users: ' %><%= text_field_tag(:letter,params[:letter]) %>
<%= select_tag(:search_by, options_for_select([['Username', 1], ['Full name', 2], ['Email', 3]])) %>
<%= submit_tag("Search") %>
<% end %>

<div>
  <%= render :partial => 'shared_scripts/letters' %>
</div>

<%= render :partial => 'users/pagination' %>

<div ng-repeat="n in names">
RECEIVED FROM RAILS: {{n}}
</div>

<hr/>
<%= render :partial => 'users/pagination' %>
<hr/>
<%= render :partial => 'shared_scripts/pages' %>

<%= render :partial => 'shared_scripts/letters' %>

<p>
  <%
      session[:return_to] = "#{request.protocol}#{request.host_with_port}#{request.fullpath}"
    %>

  <%= link_to 'New User', :action => 'new' %> |
  <%= link_to 'Import Users', :controller=>'import_file', :action=>'start', :model => 'User', :expected_fields => 'username, full name (first[ middle] last), e-mail address, password' %>|
  <%= link_to 'Export Users', :controller=>'export_file',:action=>'start',:model=> 'User',:id=> 1 %>

</p>

</div>