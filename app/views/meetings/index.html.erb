<h1>Mentored Teams</h1>

<table>
  <thead>
  <tr>
    <th class="head">Team Name</th>
    <th class="head">Members' Names</th>
    <th class="head">Members' User IDs</th>
    <th class="head">Emails Concatenated</th>
    <th class="head">Mentor</th>
    <th class="head">1st Mtg</th>
    <th class="head">2nd Mtg</th>
    <th class="head">3rd Mtg</th>
  </tr>
  </thead>

  <tbody>
  <% @mentored_teams.each do |team| %>
    <tr class="exp" style = "padding: 5px">
      <!-- Team Name -->
      <td style = "padding: 5px"><%= team.name %></td>

      <!-- Members' Names -->
      <td style = "padding: 5px"><%= team.users.map(&:name).join(', ') %></td>

      <!-- Members' User IDs -->
      <td style = "padding: 5px"><%= team.users.map(&:id).join(', ') %></td>

      <!-- Emails Concatenated -->
      <td style = "padding: 5px"><%= team.users.map(&:email).join(', ') %></td>

      <!-- Mentor Name -->
      <% mentor = current_user || 'N/A' %>
      <td style = "padding: 5px"><%= mentor.is_a?(User) ? mentor.name : mentor %></td>

      <!-- Meeting Dates -->
      <% meeting_dates = Meeting.where(team_id: team.id).order(:date).limit(3).pluck(:date) %>
      <% 3.times do |i| %>
        <td style = "padding: 5px" ><%= meeting_dates[i]&.strftime('%-m/%-d') || 'Not Scheduled' %></td>
      <% end %>
    </tr>
  <% end %>
  </tbody>
</table>
