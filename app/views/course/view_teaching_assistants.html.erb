<h1>Teaching assistants</h1>
<h2>Course: <%= @course.name %></h2>
<% if @course.ta_mappings != nil && @course.ta_mappings.size > 0 %>
  <table class="listing" cellpadding=2>
    <tr>
      <th>Teaching Assistant Name</th>
      <th></th>
      <th></th>
    </tr>
    <% for ta in @course.ta_mappings %>
      <tr class="listingRow">
        <td><%= User.find(ta.ta_id).name %></td>
        <td><%= link_to "Edit", {:action => 'show', :controller =>'users', :id => ta.ta_id} %></td>
        <td>
          <%= link_to "Delete", { :action => 'remove_ta', :controller =>'course', :id => ta.id, :course_id => ta.course_id },  data: { confirm: 'Are you sure?' }, :remote => true, :class => 'delete_function' %>
        </td>
      </tr>
    <%end%>
  </table>
<%end%>
<%=
  render :partial => 'add_individual',
    :locals => {:form_action => "add_ta",
                :obj_type => "course_id",
                :obj_id => @course.id}
              %>
            <%
                session[:return_to] = request.url
            session[:expected_fields] = 'username, full name (first[ middle] last), e-mail address, password'
            session[:course_id] = @course.id
          %>

        <hr/>
<!--
<script>
  $("button").click(function(){
    $.ajax({url: "demo_test.txt", success: function(result){
      $("#div1").html(result);
    }});
  });
</script>
-->
<script>
  $('.delete_function').bind('ajax:success', function() {
    $(this).closest('tr').fadeOut();
  });
</script>
