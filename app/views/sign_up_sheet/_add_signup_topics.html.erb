<% @assignment = Assignment.find(params[:id]) %>
<% if flash[:notice] %>
    <div class="flash_note"><%= flash_message :notice %></div>
<% end %>

<% @sign_up_topics = SignUpTopic.where(['assignment_id = ?', @assignment.id]) %>
<% @slots_filled = SignUpTopic.find_slots_filled(@assignment.id)  %>
<% @slots_waitlisted = SignUpTopic.find_slots_waitlisted(@assignment.id) %>
<% @participants = SignedUpTeam.find_team_participants(@assignment.id)  %>

<!-- 1781 -->
<%= content_tag :div, id: "jsGrid", data: { assignmentid: @assignment.id }  do %>
<% end %>

<% session[:return_to] = request.url %>

<% if @sign_up_topics.count == 0%>
<%= link_to 'Import topics', {:controller=>'import_file', :action=>'start', :model => 'SignUpTopic', :id => params[:id]}, :expected_fields => 'Topic identifier, Topic name, Max choosers, Topic Category', :confirm => "You are adding topics to this assignment.  Students will now have to select a topic before they submit their work.", :topic => @topics, :method => :get %>|
<% else %>
<%= link_to 'Import topics', :controller=>'import_file', :action=>'start', :model => 'SignUpTopic', :id => params[:id], :expected_fields => 'Topic identifier, Topic name, Max choosers, Topic Category' %>|
<% end %>
 <% if @assignment.staggered_deadline == true %>
  <a href="#due_date" onClick="toggleVis('due_date');">
    <span class="inline" id="due_date_show">Show start/due date</span>
    <span class="inline" id="due_date_hide" style="display: none">Hide start/due date</span>
  </a>
  <%= form_tag :controller => 'sign_up_sheet', :action => 'save_topic_deadlines', :assignment_id => @assignment.id do %>
    <div id="due_date_myDiv" style="display:none" align="left">
      <br/><%= render :partial => '/sign_up_sheet/due_dates', :locals => {review_rounds: review_rounds, assignment_submission_due_dates: assignment_submission_due_dates, assignment_review_due_dates: assignment_review_due_dates} %>
    </div>
  <% end %>
<% end %>
<br>


<!-- Old Code-->
<% if false %>


<a id="teamsAndMembers" onclick="showHideTeamAndMembers(<%= @sign_up_topics.size%>)">Hide all teams</a>
<% if @sign_up_topics.size != 0 %>
    <table class="general">
      <tr><%= render :partial => '/sign_up_sheet/table_header' %></tr>

      <% i=1 %>
      <% for topic in @sign_up_topics %>
          <tr>
            <%= render :partial => '/sign_up_sheet/table_line', :locals => {:i=>i, :topic=>topic} %>
          </tr>
          <% i=i+1 %>
      <% end %>

    </table>

<% else %>
    <div class="flash_note">
      <%= "Signup topics have not yet been created." %>
    </div>
<% end %>


<% end %> 