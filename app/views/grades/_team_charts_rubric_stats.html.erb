<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>


<script type="text/javascript" src="/assets/rubric_stats.js"></script>

<!--Assign the controller variable to use a better name-->
<% @assignment_names_to_compare = @assignment_names %>

<div id="tab_0_selector">Analyze Assignment | <a href="javascript:void(0);" onclick="switchToTab(1); return false;">Compare Assignments</a></div>
<div id="tab_1_selector" style="display:none"><a href="javascript:void(0);" onclick="switchToTab(0); return false;">Analyze Assignment</a> | Compare Assignments</div>

<div id="chart_div"></div>

<div align="center" id="tab_0">
  <table>
    <tr valign="top">

      <td>
        <div><label>Round:</label></div>
        <div>
          <%= select_tag('round_selector', options_for_select(@round_names, @round_names[0]),
                         :onchange => 'toggleRound(this);', :autocomplete => 'off') %>
        </div>
      </td>

      <td>
        <div><label>Criteria:</label></div>
        <% @criteria_names.each_with_index do |crow, i| %>
          <div id=<%= "round_#{i}_criteria" %> style=<%= "display:none" unless i.zero? %>>
            <% crow.each_with_index do |c, j| %>
              <div><label><input id=<%= "round_#{i}_criterion_#{j}_selector" %> type="checkbox" checked='true' onclick="drawChart();"/><%= c %></label></div>
            <% end %>
          </div>
        <% end %>
      </td>

      <td>
        <div><label>Metric:</label></div>
        <div>
          <%= select_tag('metric_selector', options_for_select(@metric_names, @metric_names[0]),
                         :onchange => 'toggleMetric(this);', :autocomplete => 'off') %>
        </div>
      </td>
    </tr>
  </table>
</div>

<div align="center" id="tab_1" style="display:none">
  <table>
    <tr valign="top">

      <td>
        <div><label>Assignment:</label></div>
        <%= select_tag('assignment_selector',
                       options_for_select(@assignment_names_to_compare, @assignment_names_to_compare[0]),
                       :onchange => 'toggleAssignment(this);', :autocomplete => 'off') %>
      </td>

      <td>
        <div><label>Round:</label></div>
        <%= select_tag('round_selector', options_for_select(@round_names, @round_names[0]),
                       :onchange => 'toggleRound(this);', :autocomplete => 'off') %>
      </td>

      <td>
        <div><label>Criteria:</label></div>
        <% @assignment_names_to_compare.each_index do |k| %>
          <% @criteria_names.each_with_index do |crow, i| %>
            <div id=<%= "assignment_#{k}_round_#{i}_criteria" %> style=<%= "display:none" unless (i.zero? and k.zero?) %>>
              <% crow.each_with_index do |c, j| %>
                <div><label><input id=<%= "assignment_#{k}_round_#{i}_criterion_#{j}_selector" %> type="checkbox" checked='true' onclick="drawChart();"/><%= c %></label></div>
              <% end %>
            </div>
          <% end %>
        <% end %>
      </td>
    </tr>
  </table>

</div>
